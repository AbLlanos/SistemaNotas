<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title>Crear Nota de Bachillerato General</title>
</head>
<body>

<form th:action="@{/pages/Admin/notas/guardar}"
      th:object="${nota}"
      method="post">
    <input type="hidden" th:name="${_csrf.parameterName}" th:value="${_csrf.token}" />

    <input type="hidden" name="idNota" th:if="${nota.idNota != null}" th:value="${nota.idNota}" />

    <!-- Estudiante -->
    <label for="cedulaEstudiante">Estudiante:</label>
    <select id="cedulaEstudiante" name="cedulaEstudiante" required>
        <option value="" disabled th:selected="${nota == null}">Seleccione un estudiante</option>
        <th:block th:each="est : ${estudiantes}">
            <option th:value="${est.cedula}"
                    th:text="${est.nombre}"
                    th:selected="${nota != null} ? (est.cedula == nota.cedulaEstudiante) : false">
            </option>
        </th:block>
    </select>


    <!-- Materia -->
    <label for="areaMateria">Materia:</label>
    <select id="areaMateria" name="areaMateria" required>
        <option value="" disabled th:selected="${nota == null}">Seleccione una materia</option>
        <th:block th:each="mat : ${materias}">
            <option th:value="${mat.nombre}"
                    th:text="${mat.nombre}"
                    th:selected="${nota != null} ? (mat.nombre == nota.areaMateria) : false">
            </option>
        </th:block>
    </select>

    <!-- Periodo -->

    <label for="periodo">Periodo Académico:</label>
    <select id="periodo" name="nombrePeriodo" required>
        <option value="" disabled th:selected="${nota == null}">Seleccione un periodo</option>
        <th:block th:each="per : ${periodos}">
            <option th:value="${per.nombre}"
                    th:text="${per.nombre}"
                    th:selected="${nota != null} ? (per.nombre == nota.nombrePeriodo) : false">
            </option>
        </th:block>
    </select>

    <!-- Trimestre -->

    <div class="hidden">

    <label for="trimestre">Trimestre:</label>
    <select id="trimestre" name="trimestre" required>
        <option value="" disabled th:selected="${nota == null}">Seleccione un trimestre</option>
        <th:block th:each="tri : ${trimestres}">
            <option th:value="${tri.nombre}"
                    th:text="${tri.nombre}"
                    th:selected="${nota != null} ? (tri.nombre == nota.trimestre) : false">
            </option>
        </th:block>
    </select>
    </div>
    <!-- Primer Trimestre -->
    <h3>Primer Trimestre</h3>
    <label for="notaNumerica1">Nota Numérica:</label>
    <input type="number" step="0.01" id="notaNumerica1" name="notaNumericaPrimerTrim" required
           th:value="${nota != null} ? ${nota.notaNumericaPrimerTrim} : ''" />

    <label for="notaCualitativa1">Nota Cualitativa:</label>
    <input type="text" id="notaCualitativa1" name="notaCualitativaPrimerTrim"
           th:value="${nota != null} ? ${nota.notaCualitativaPrimerTrim} : ''" />

    <label for="asistencia1">Asistencias:</label>
    <input type="number" id="asistencia1" name="asistenciaPrimerTrim"
           th:value="${nota != null} ? ${nota.asistenciaPrimerTrim} : ''" />

    <label for="faltasJustificadas1">Faltas Justificadas:</label>
    <input type="number" id="faltasJustificadas1" name="faltasJustificadasPrimerTrim"
           th:value="${nota != null} ? ${nota.faltasJustificadasPrimerTrim} : ''" />

    <label for="faltasInjustificadas1">Faltas Injustificadas:</label>
    <input type="number" id="faltasInjustificadas1" name="faltasInjustificadasPrimerTrim"
           th:value="${nota != null} ? ${nota.faltasInjustificadasPrimerTrim} : ''" />

    <label for="atrasos1">Atrasos:</label>
    <input type="number" id="atrasos1" name="atrasosPrimerTrim"
           th:value="${nota != null} ? ${nota.atrasosPrimerTrim} : ''" />

    <!-- Segundo Trimestre -->
    <h3>Segundo Trimestre</h3>
    <label for="notaNumerica2">Nota Numérica:</label>
    <input type="number" step="0.01" id="notaNumerica2" name="notaNumericaSegundoTrim"
           th:value="${nota != null} ? ${nota.notaNumericaSegundoTrim} : ''" />

    <label for="notaCualitativa2">Nota Cualitativa:</label>
    <input type="text" id="notaCualitativa2" name="notaCualitativaSegundoTrim"
           th:value="${nota != null} ? ${nota.notaCualitativaSegundoTrim} : ''" />

    <label for="asistencia2">Asistencias:</label>
    <input type="number" id="asistencia2" name="asistenciaSegundoTrim"
           th:value="${nota != null} ? ${nota.asistenciaSegundoTrim} : ''" />

    <label for="faltasJustificadas2">Faltas Justificadas:</label>
    <input type="number" id="faltasJustificadas2" name="faltasJustificadasSegundoTrim"
           th:value="${nota != null} ? ${nota.faltasJustificadasSegundoTrim} : ''" />

    <label for="faltasInjustificadas2">Faltas Injustificadas:</label>
    <input type="number" id="faltasInjustificadas2" name="faltasInjustificadasSegundoTrim"
           th:value="${nota != null} ? ${nota.faltasInjustificadasSegundoTrim} : ''" />

    <label for="atrasos2">Atrasos:</label>
    <input type="number" id="atrasos2" name="atrasosSegundoTrim"
           th:value="${nota != null} ? ${nota.atrasosSegundoTrim} : ''" />

    <!-- Tercer Trimestre -->
    <h3>Tercer Trimestre</h3>
    <label for="notaNumerica3">Nota Numérica:</label>
    <input type="number" step="0.01" id="notaNumerica3" name="notaNumericaTercerTrim"
           th:value="${nota != null} ? ${nota.notaNumericaTercerTrim} : ''" />

    <label for="notaCualitativa3">Nota Cualitativa:</label>
    <input type="text" id="notaCualitativa3" name="notaCualitativaTercerTrim"
           th:value="${nota != null} ? ${nota.notaCualitativaTercerTrim} : ''" />

    <label for="asistencia3">Asistencias:</label>
    <input type="number" id="asistencia3" name="asistenciaTercerTrim"
           th:value="${nota != null} ? ${nota.asistenciaTercerTrim} : ''" />

    <label for="faltasJustificadas3">Faltas Justificadas:</label>
    <input type="number" id="faltasJustificadas3" name="faltasJustificadasTercerTrim"
           th:value="${nota != null} ? ${nota.faltasJustificadasTercerTrim} : ''" />

    <label for="faltasInjustificadas3">Faltas Injustificadas:</label>
    <input type="number" id="faltasInjustificadas3" name="faltasInjustificadasTercerTrim"
           th:value="${nota != null} ? ${nota.faltasInjustificadasTercerTrim} : ''" />

    <label for="atrasos3">Atrasos:</label>
    <input type="number" id="atrasos3" name="atrasosTercerTrim"
           th:value="${nota != null} ? ${nota.atrasosTercerTrim} : ''" />

    <!-- Comportamiento -->
    <h3>Comportamiento</h3>
    <label for="comportamiento1">Primer Trimestre:</label>
    <input type="text" id="comportamiento1" name="comportamientoPrimerTrim"
           th:value="${nota != null} ? ${nota.comportamientoPrimerTrim} : ''" />

    <label for="comportamiento2">Segundo Trimestre:</label>
    <input type="text" id="comportamiento2" name="comportamientoSegundoTrim"
           th:value="${nota != null} ? ${nota.comportamientoSegundoTrim} : ''" />

    <label for="comportamiento3">Tercer Trimestre:</label>
    <input type="text" id="comportamiento3" name="comportamientoTercerTrim"
           th:value="${nota != null} ? ${nota.comportamientoTercerTrim} : ''" />

    <br><br>
    <button type="submit">Guardar Nota Completa</button>
</form>

</body>
</html>
